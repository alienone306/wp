(function(a){a(document).on("ready",function(){a(".header-menu__item--dropdown .header-menu__submenu, .header-menu__item--megamenu .header-menu__submenu--level-0").each(function(){var h=a(this),i=a(this).parent(),g=i.find("> .header-menu__item-link");i.hover(function(){if(a.fn.lsvrLoreGetMediaQueryBreakpoint()>1199){i.addClass("header-menu__item--hover");h.show()}},function(){if(a.fn.lsvrLoreGetMediaQueryBreakpoint()>1199){i.removeClass("header-menu__item--hover");h.hide()}});g.on("click touchstart",function(){if(a.fn.lsvrLoreGetMediaQueryBreakpoint()>1199){if(!i.hasClass("header-menu__item--hover")){if(h.parents(".header-menu__submenu").length<1){a(".header-menu__item--hover").each(function(){a(this).removeClass("header-menu__item--hover");a(this).find("> .header-menu__submenu").hide()})}i.addClass("header-menu__item--hover");h.show();a("html").on("touchstart",function(j){i.removeClass("header-menu__item--hover");h.hide()});i.on("click touchstart",function(j){j.stopPropagation()});return false}}})});a(".header-menu__submenu").each(function(){var g=a(this),i=a(this).parent();i.append('<button type="button" class="header-menu__item-toggle"><i class="header-menu__item-toggle-icon"></i></button>');var h=i.find("> .header-menu__item-toggle");h.on("click",function(){g.slideToggle(150);a(this).toggleClass("header-menu__item-toggle--active")});a(document).on("lsvrLoreScreenTransition",function(){h.removeClass("header-menu__item-toggle--active");g.removeAttr("style")})});a(".header-search-form").each(function(){var i=a(this),m=i.find(".header-search-form__input"),l=i.find(".header-search-form__panel"),g=i.find(".header-search-form__keywords"),k=i.find(".header-search-form__filter"),h=i.parents(".header-search").length>0?"header":"navbar";if(i.hasClass("header-search-form--ajax")){g.find("a").each(function(){a(this).on("click",function(){m.val(a(this).data("search-keyword")).focus();return false})})}if("header"===h){m.on("focus",function(){l.slideDown(150)});a(document).on("click",function(n){if(!a(n.target).closest(".header-search-form").length){l.slideUp(150)}})}var j=function(n){if(true===n.prop("checked")||"checked"===n.prop("checked")){n.parent().addClass("header-search-form__filter-label--active");if(n.hasClass("header-search-form__filter-checkbox--any")){k.find(".header-search-form__filter-checkbox:not( .header-search-form__filter-checkbox--any )").prop("checked",false).change()}else{k.find(".header-search-form__filter-checkbox--any").prop("checked",false).change()}}else{n.parent().removeClass("header-search-form__filter-label--active");if(k.find(".header-search-form__filter-checkbox:checked").length<1){k.find(".header-search-form__filter-checkbox--any").prop("checked",true).change()}}};k.find(".header-search-form__filter-checkbox").each(function(){j(a(this));a(this).on("change",function(){j(a(this))})})});a(".header-navbar-search").each(function(){var j=a(this),h=j.find(".header-navbar-search__toggle"),g=j.find(".header-navbar-search__form"),k=j.find(".header-search-form__input");h.on("click",function(){h.toggleClass("header-navbar-search__toggle--active");g.slideToggle(200,function(){if(k.is(":visible")){k.focus();a(window).on("click",i)}})});var i=function(){h.removeClass("header-navbar-search__toggle--active");g.slideUp(200);a(window).unbind("click",i)};j.on("click",function(l){l.stopPropagation()});a(document).on("lsvrLoreScreenTransition",function(){g.removeAttr("style");h.removeClass("header-navbar-search__toggle--active")})});a(".header--sticky").each(function(){var h=a(this),k=h.find(".header-navbar"),i=h.find(".header-navbar__placeholder"),j=i.height(),g=k.height();if(Math.abs(j-g)>5){i.css("height",k.height())}if(a(document).scrollTop()>=5){k.addClass("header-navbar--scrolled")}a(document).scroll(function(){if(a.fn.lsvrLoreGetMediaQueryBreakpoint()>1199){k.toggleClass("header-navbar--scrolled",a(document).scrollTop()>=5)}})});a(".header-navbar").each(function(){var j=a(this),g=a("#header"),k=j.find(".header-navbar__navigation"),i=a(".header-search"),h=j.find(".header-navbar__toggle");h.on("click",function(){h.toggleClass("header-navbar__toggle--active");g.toggleClass("header--expanded");k.slideToggle();i.slideToggle()});a(document).on("lsvrLoreScreenTransition",function(){h.removeClass("header-navbar__toggle--active");g.removeClass("header--expanded");k.removeAttr("style");i.removeAttr("style")})});if(a.fn.masonry&&a.fn.imagesLoaded){a(".lsvr_kba-post-archive .post-archive__list--masonry").each(function(){var h=a(this),g=a("html").attr("dir")&&"rtl"===a("html").attr("dir")?true:false;h.imagesLoaded(function(){h.masonry({isRTL:g})})})}a(".lsvr_faq-post-archive--is-expandable .post-archive__list > .post").each(function(){var j=a(this),i=j.parent(),g=j.find(".post__header"),h=j.find(".post__content-wrapper");g.on("click",function(){h.slideToggle(200);j.toggleClass("post--expanded")})});a(".lsvr_kba-tree-widget").each(function(){var j=a(this),h=j.find(".lsvr_kba-tree-widget__list--level-0");if("undefined"!==typeof lsvr_lore_js_labels&&lsvr_lore_js_labels.hasOwnProperty("expand")&&lsvr_lore_js_labels.hasOwnProperty("collapse")){var g=lsvr_lore_js_labels.expand;var i=lsvr_lore_js_labels.collapse}else{var g="Expand";var i="Collapse"}j.find(".lsvr_kba-tree-widget__item--current").each(function(){a(this).parents(".lsvr_kba-tree-widget__item").addClass("lsvr_kba-tree-widget__item--current-ancestor")});j.find(".lsvr_kba-tree-widget__list").each(function(){a(this).parent(".lsvr_kba-tree-widget__item").addClass("lsvr_kba-tree-widget__item--has-children")});j.find(".lsvr_kba-tree-widget__item--has-children:not( .lsvr_kba-tree-widget__item--current-ancestor, .lsvr_kba-tree-widget__item--current )").each(function(){a(this).find("> .lsvr_kba-tree-widget__item-inner > .lsvr_kba-tree-widget__item-link-wrapper").append('<button type="button" class="lsvr_kba-tree-widget__item-toggle" aria-expanded="false" aria-label="'+g+'"><i class="lsvr_kba-tree-widget__item-toggle-icon"><i></button>')});j.find(".lsvr_kba-tree-widget__item--has-children").each(function(){var l=a(this).find("> .lsvr_kba-tree-widget__item-inner .lsvr_kba-tree-widget__item-toggle"),k=a(this).find("> .lsvr_kba-tree-widget__list");l.on("click",function(){k.slideToggle(150);a(this).toggleClass("lsvr_kba-tree-widget__item-toggle--active");if(a(this).hasClass("lsvr_kba-tree-widget__item-toggle--active")){a(this).attr("aria-expanded","true");a(this).attr("aria-label",i)}else{a(this).attr("aria-expanded","false");a(this).attr("aria-label",g)}})})});a(".footer-scroll-top").on("click",function(){a("html, body").animate({scrollTop:0},200);return false});a(".lsvr-lore-faq .lsvr-lore-faq__post").each(function(){var i=a(this),g=i.find(".lsvr-lore-faq__post-header"),h=i.find(".lsvr-lore-faq__post-content-wrapper");g.on("click",function(){h.slideToggle(200);i.toggleClass("lsvr-lore-faq__post--expanded")})});if(a.fn.masonry&&a.fn.imagesLoaded){a(".lsvr-lore-knowledge-base--masonry .lsvr-lore-knowledge-base__list").each(function(){var h=a(this),g=a("html").attr("dir")&&"rtl"===a("html").attr("dir")?true:false;h.imagesLoaded(function(){h.masonry({isRTL:g})})})}if(a.fn.masonry&&a.fn.imagesLoaded){a(".lsvr-lore-sidebar--masonry .lsvr-lore-sidebar__list").each(function(){var h=a(this),g=a("html").attr("dir")&&"rtl"===a("html").attr("dir")?true:false;h.imagesLoaded(function(){h.masonry({isRTL:g})})})}if(a.fn.masonry&&a.fn.imagesLoaded){a(".lsvr-lore-sitemap--masonry .lsvr-lore-sitemap__list").each(function(){var h=a(this),g=a("html").attr("dir")&&"rtl"===a("html").attr("dir")?true:false;h.imagesLoaded(function(){h.masonry({isRTL:g})})})}a(".lsvr-lore-toc").each(function(){var k=a(this),g=k.find(".lsvr-lore-toc__content"),h=k.find(".lsvr-lore-toc__spinner"),j=k.parents(".post__content"),l,i="";l=j.find("h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]");if(l.length>0){l.each(function(){i+='<li class="lsvr-lore-toc__item lsvr-lore-toc__item--'+a(this).prop("tagName").toLowerCase()+'"><a href="#'+a(this).prop("id")+'" class="lsvr-lore-toc__item-link">'+a(this).text()+"</a></li>"});g.removeClass("lsvr-lore-toc__content--loading");g.html('<ul class="lsvr-lore-toc__list">'+i+"</ul>")}else{k.slideUp(200)}});a('.lsvr-lore-toc__item-link, .header-menu__item-link[href^="#"], .footer-menu a[href^="#"]').each(function(){var h=a(this),g=a(this).attr("href"),i=g.substr(g.indexOf("#"));if(a(i).length>0){h.on("click",function(j){var k=a.fn.lsvrLoreGetMediaQueryBreakpoint()>991&&a("#header").hasClass("header--sticky")?100:0;a("html, body").animate({scrollTop:a(i).offset().top-k},200);return false})}});if(a.fn.magnificPopup){if("undefined"!==typeof lsvr_lore_js_labels&&lsvr_lore_js_labels.hasOwnProperty("magnific_popup")){var b=lsvr_lore_js_labels.magnific_popup;a.extend(true,a.magnificPopup.defaults,{tClose:b.mp_tClose,tLoading:b.mp_tLoading,gallery:{tPrev:b.mp_tPrev,tNext:b.mp_tNext,tCounter:"%curr% / %total%"},image:{tError:b.mp_image_tError},ajax:{tError:b.mp_ajax_tError}})}a(".lsvr-open-in-lightbox, .gallery .gallery-item a, .wp-block-gallery .blocks-gallery-item a").magnificPopup({type:"image",removalDelay:300,mainClass:"mfp-fade",gallery:{enabled:true}})}if(!a.fn.lsvrLoreGetMediaQueryBreakpoint){a.fn.lsvrLoreGetMediaQueryBreakpoint=function(){if(a("#lsvr-media-query-breakpoint").length<1){a("body").append('<span id="lsvr-media-query-breakpoint" style="display: none;"></span>')}var g=a("#lsvr-media-query-breakpoint").css("font-family");if(typeof g!=="undefined"){g=g.replace('"',"").replace('"',"").replace("'","").replace("'","")}if(isNaN(g)){return a(window).width()}else{return parseInt(g)}}}var e;if(a.fn.lsvrLoreGetMediaQueryBreakpoint){e=a.fn.lsvrLoreGetMediaQueryBreakpoint();a(window).resize(function(){if(a.fn.lsvrLoreGetMediaQueryBreakpoint()!==e){e=a.fn.lsvrLoreGetMediaQueryBreakpoint();a.event.trigger({type:"lsvrLoreScreenTransition",message:"Screen transition completed.",time:new Date()})}})}else{e=a(document).width()}a(".header-search-form--ajax").each(function(){var g=a(this),m=g.find(".header-search-form__input"),i=g.find(".header-search-form__filter"),l=g.find(".header-search-form__submit"),h="",k,j=[];i.find(".header-search-form__filter-checkbox:checked").each(function(){j.push(a(this).val())});k=j.length<1?"any":j.join();j=[];m.on("change keyup paste",function(o){var n=a(this).val();if((n!==h)&&!(38===o.which||40===o.which||13===o.which)){h=n.trim();c(g,k,h)}});l.on("click",function(o){var n=m.val();if((n!==h)){h=n.trim();c(g,k,h)}});m.on("focus",function(o){var n=a(this).val();if((n===h)&&g.find(".header-search-form__results").length>0){g.find(".header-search-form__results").slideDown(300)}else{h=n.trim();c(g,k,h)}});i.find(".header-search-form__filter-checkbox").on("change",function(){i.find("input:checked").each(function(){j.push(a(this).val())});k=j.length<1?"any":j.join();j=[];c(g,k,h)});m.on("keydown",function(p){var q=g.find(".header-search-form__results"),n=q.find(".header-search-form__results-item--active");if(40===p.which){if(n.length<1||n.filter(":last-child").length){n.removeClass("header-search-form__results-item--active");q.find(".header-search-form__results-item:first-child").addClass("header-search-form__results-item--active")}else{n.removeClass("header-search-form__results-item--active");n.next().addClass("header-search-form__results-item--active")}p.preventDefault();p.stopPropagation()}if(38===p.which){if(n.length<1||n.filter(":first-child").length){n.removeClass("header-search-form__results-item--active");q.find(".header-search-form__results-item:last-child").addClass("header-search-form__results-item--active")}else{n.removeClass("header-search-form__results-item--active");n.prev().addClass("header-search-form__results-item--active")}p.preventDefault();p.stopPropagation()}if(13===p.which){p.preventDefault();p.stopPropagation();var o=m.val();if((o!==h)){h=o.trim();c(g,k,h)}}})});var d=null;function c(g,i,h){h=h.trim();if(h.length>1){clearTimeout(g.data("ajax-search-timer"));g.data("ajax-search-timer",setTimeout(function(){g.addClass("header-search-form--loading");g.find(".header-search-form__spinner").fadeIn(150);if(null!==d){d.abort()}d=a.post(sqQuery.ajaxurl,{action:"sq_ajax_search",search_query:h,sq_nonce:sqQuery.nonce}).done(function(k){if(""!==k){var j=false;try{j=JSON.parse(k)}catch(l){console.log("Ajax Search Response: INVALID JSON")}if(j){f(g,j)}}else{console.log("Ajax Search Response: BLANK")}g.removeClass("header-search-form--loading");g.find(".header-search-form__spinner").fadeOut(150)}).fail(function(){g.removeClass("header-search-form--loading");g.find(".header-search-form__spinner").fadeOut(150);console.log("Ajax Search Response: ERROR")})},500))}}function f(i,j){if(j.hasOwnProperty("status")){var g=j.status,l=i.find(".header-search-form__input"),h="";if("ok"===g&&j.hasOwnProperty("results")){a.each(j.results,function(){if(this.hasOwnProperty("post_title")&&this.hasOwnProperty("permalink")&&this.hasOwnProperty("post_type")){h+='<li class="header-search-form__results-item header-search-form__results-item--'+this.post_type+'">';h+='<i class="fa '+(this.post_type==="lsvr_kba"?"fa-book":(this.post_type==="lsvr_faq"?"fa-question":"fa-file-o"))+' float-left m-2"></i>';h+='<a href="'+this.permalink+'" class="header-search-form__results-item-link" target="_blank">'+this.post_title+"</a>";if(j.hasOwnProperty("rating_type")&&"likes"===j.rating_type&&this.hasOwnProperty("post_type")&&this.hasOwnProperty("rating_likes_abb")){h+='<span class="header-search-form__results-item-rating c-post-rating">';h+='<span class="c-post-rating__likes"><i class="fa fa-thumbs-up"></i> '+this.rating_likes_abb+"</span>";h+="</span>"}else{if(j.hasOwnProperty("rating_type")&&"both"===j.rating_type&&this.hasOwnProperty("rating_likes_abb")&&this.hasOwnProperty("rating_dislikes_abb")){h+='<span class="header-search-form__results-item-rating c-post-rating">';h+='<span class="c-post-rating__likes">'+this.rating_likes_abb+"</span>";h+='<span class="c-post-rating__dislikes">'+this.rating_dislikes_abb+"</span>";h+="</span>"}else{if(j.hasOwnProperty("rating_type")&&"sum"===j.rating_type&&this.hasOwnProperty("rating_sum_abb")&&this.hasOwnProperty("rating_sum")){h+='<span class="header-search-form__results-item-rating c-post-rating">';if(parseInt(this.rating_sum)>=0){h+='<span class="c-post-rating__sum c-post-rating__sum--positive">'+this.rating_sum_abb+"</span>"}else{h+='<span class="c-post-rating__sum c-post-rating__sum--negative">'+this.rating_sum_abb+"</span>"}h+="</span>"}}}h+="</li>"}});h='<ul class="header-search-form__results-list">'+h+"</ul>";if(j.hasOwnProperty("more_label")&&j.hasOwnProperty("more_link")){h+='<p class="header-search-form__results-more">';h+='<a href="'+j.more_link+'" class="header-search-form__results-more-link"target="_blank">'+j.more_label+"</a></p>"}}else{if("noresults"===g){var k=j.hasOwnProperty("message")?j.message:"";if(""!==k){h='<p class="header-search-form__results-message">'+k+"</p>"}}}if(""!==h){if(i.find(".header-search-form__results").length>0){i.find(".header-search-form__results").first().html(h)}else{i.find(".header-search-form__panel-inner").append('<div class="header-search-form__results">'+h+"</div>")}if(i.find(".header-search-form__results").is(":hidden")){i.find(".header-search-form__results").slideDown(300)}}}}})})(jQuery);