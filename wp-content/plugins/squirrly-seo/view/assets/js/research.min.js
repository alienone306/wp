if(typeof SQ_DEBUG==="undefined"){var SQ_DEBUG=false}(function(b){var a="kr";b(document).keypress(function(d){var c=d.keyCode||d.which;if(c==13){b(".sqd-submit:visible").trigger("click")}});b.sq_steps=function(c){if(c===2&&b("input[name=sq_input_keyword]").val()===""){b.sq_showMessage("Add a keyword first",2000);return}b(".sq_step").hide();b(".sq_step"+c).show()};b.fn.sq_getSuggested=function(){var c=this;if(b("input[name=sq_input_keyword]").val()!==""){b.sq_steps(3);c.addClass("sq_loading");b.post(sqQuery.ajaxurl,{action:"sq_ajax_research_others",keyword:b("input[name=sq_input_keyword]").val(),country:b("select[name=sq_select_country] option:selected").val(),lang:"en",sq_nonce:sqQuery.nonce}).done(function(d){c.removeClass("sq_loading");$count=0;if(typeof d.keywords!=="undefined"&&d.keywords!==null&&d.keywords.length>0){c.find(".sq_suggested").each(function(){if(typeof d.keywords[$count]!=="undefined"){b(this).html('<input type="checkbox" id="sq_input_keywords'+$count+'" name="sq_input_keywords[]" class="sq_input_keywords custom-control-input" value="'+d.keywords[$count]+'"><label class="custom-control-label" for="sq_input_keywords'+$count+'">'+d.keywords[$count]+"</label>");$count++}else{b(this).hide()}})}else{if(typeof d.error!=="undefined"&&d.error==="limit_exceeded"){c.find(".sq_limit_exceeded").show()}else{c.find(".sq_research_error").show()}}}).fail(function(){c.removeClass("sq_loading").show();c.prepend('<div class="text-center text-warning">Squirrly Library loading error. Please contact us at support@squirrly.co</div>')})}else{b(".sq_step2").find(".sq_research_error").show()}};b.fn.sq_getResearch=function(){var f=this;b.sq_steps(4);f.find(".btn").hide();var h=b("div.sq_step4").find(".sq_loading_steps");var c=b("input[name=sq_input_keyword]").val();b("input.sq_input_keywords:checked").each(function(){c+=","+b(this).val()});var d=true;f.addClass("sq_loading");var g=1;h.show();h.find(".sq_loading_step").hide();h.find(".sq_loading_step"+g).show();var e=setInterval(function(){g++;if(g<=9){h.find(".sq_loading_step").hide();h.find(".sq_loading_step"+g).show()}else{clearInterval(e)}},5000);b.post(sqQuery.ajaxurl,{action:"sq_ajax_research_process",keywords:c,country:b("select[name=sq_select_country] option:selected").val(),lang:"en",sq_nonce:sqQuery.nonce}).done(function(i){d=false;f.removeClass("sq_loading");h.hide();f.find(".btn").show();var j=b("div.sq_step4 table");if(typeof i.html!=="undefined"){j.find("tbody").html(i.html);b(".sq_research_success").show()}j.show();b.extend(b.fn.dataTableExt.oSort,{"formatted-value-pre":function(k){return b("<div></div>").append(k).find("span").data("value")},"formatted-value-asc":function(l,k){return l-k},"formatted-value-desc":function(l,k){return k-l}});j.DataTable({columnDefs:[{targets:[5,6],sortable:false},{targets:[2,3,4],sortable:true,type:"formatted-value"}],bPaginate:true,bLengthChange:false,bFilter:true,iDisplayLength:20});j.find(".sq_trend:visible").each(function(){b.sq_loadChart(b(this))});j.find(".sq_research_add_briefcase").each(function(){b(this).on("click",function(){b(this).sq_addBriefcase()})});j.find(".sq_research_selectit").on("click",function(){b(this).addClass("sq_minloading");var k=b(this).data("keyword");b.sq_setCookie("sq_keyword",k);location.href=b(this).data("post")})}).fail(function(){d=false;f.removeClass("sq_loading");h.hide();f.find(".btn").show();b(".sq_research_timeout_error").show()},"json");setTimeout(function(){if(d){f.find(".btn").show();f.removeClass("sq_loading").show();h.hide();f.prepend('<div class="text-center text-warning">Lost connection with the server. Please make sure you whitelisted the IP from https://api.squirrly.co</div>')}},300000);return f};b.fn.sq_getHistory=function(){var d=this;var e=d.data("id");var c=b(d.data("destination"));if(!c.length){if(!b("#history"+e).length){c=b('<tr id="history'+e+'"></tr>');d.parents("tr:last").after(c);c.show()}}else{b(c).remove();return}if(b(c).is(":visible")){d.addClass("sq_minloading");b.post(sqQuery.ajaxurl,{action:"sq_ajax_research_history",id:d.data("id"),sq_nonce:sqQuery.nonce}).done(function(f){d.removeClass("sq_minloading");if(typeof f.html!=="undefined"){c.html(f.html)}c.find(".sq_research_add_briefcase").each(function(){b(this).on("click",function(){b(this).sq_addBriefcase()})});c.find(".sq_research_selectit").on("click",function(){b(this).addClass("sq_minloading");var g=b(this).data("keyword");b.sq_setCookie("sq_keyword",g);location.href=b(this).data("post")})}).fail(function(){d.removeClass("sq_minloading");c.html('<td colspan="4" class="col-sm-12 text-center my-3 text-danger">Could not find the records</td>')},"json")}};b(document).ready(function(){b(".sq_history_details").on("click",function(){b(this).sq_getHistory()});b(".sq_research_add_briefcase").each(function(){b(this).on("click",function(){b(this).sq_addBriefcase()})});if(b("#sq_briefcaselabels").length){b("#sq_briefcaselabels").find("table.table").DataTable({columnDefs:[{targets:[1],searchable:true,sortable:true},{targets:[0,2,3],sortable:false}],bPaginate:true,bLengthChange:false,bFilter:false,iDisplayLength:10,aaSorting:[1,"desc"]})}})})(jQuery);