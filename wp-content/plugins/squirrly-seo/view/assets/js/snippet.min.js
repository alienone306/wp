if(typeof SQ_DEBUG==="undefined"){var SQ_DEBUG=false}(function(a){a.sq_showSaved=function(b,c){if(!a(".sq_blocksnippet").find(".sq_tabcontent").length){a(".sq_blocksnippet").prepend('<div class="sq_tabcontent" ></div>')}a(".sq_blocksnippet").find(".sq_tabcontent").prepend('<div class="sq-alert sq-my-2 sq-alert-success sq-alert-absolute" >'+b+"</div>");if(typeof c!=="undefined"&&c>0){setTimeout(function(){jQuery(".sq-alert").hide()},c)}};a.sq_showError=function(b,c){if(!a(".sq_blocksnippet").find(".sq_tabcontent").length){a(".sq_blocksnippet").prepend('<div class="sq_tabcontent" ></div>')}a(".sq_blocksnippet").find(".sq_tabcontent").prepend('<div class="sq-alert sq-my-2 sq-alert-danger sq-alert-absolute" >'+b+"</div>");if(typeof c!=="undefined"&&c>0){setTimeout(function(){jQuery(".sq-alert").hide()},c)}};a.fn.sq_loadSnippet=function(){var b=this;if(!a("input[name=sq_post_id]").length){if(a("input[name=post_ID]").length>0){b.prepend('<input type="hidden" name="sq_post_id" value="'+a("input[name=post_ID]").val()+'">')}if(a("input[name=post_type]").length>0){b.prepend('<input type="hidden" name="sq_post_type" value="'+a("input[name=post_type]").val()+'">')}if(a("input[name=tag_ID]").length>0){b.prepend('<input type="hidden" name="sq_term_id" value="'+a("input[name=tag_ID]").val()+'">')}if(a("input[name=taxonomy]").length>0){b.prepend('<input type="hidden" name="sq_taxonomy" value="'+a("input[name=taxonomy]").val()+'">')}}b.each(function(){a(this).sq_getSnippet(a(this).find("input[name=sq_post_id]").val(),a(this).find("input[name=sq_term_id]").val(),a(this).find("input[name=sq_taxonomy]").val(),a(this).find("input[name=sq_post_type]").val())})};a.fn.sq_editSnippet=function(b){var d=this;var c=a.extend({called:"normal",sq_snippet_wrap:d.find(".sq_snippet_wrap"),editButton:d.find(".sq_snippet_btn_edit"),saveButton:d.find(".sq_snippet_btn_save"),cancelButton:d.find(".sq_snippet_btn_cancel"),refreshButton:d.find(".sq_snippet_btn_refresh"),last_tab:null,closeButton:d.find(".sq-close"),sq_url:d.find("input[name=sq_url]"),sq_doseo:d.find("input[name=sq_doseo].sq-switch"),sq_toggle:d.find(".sq-toggle"),sq_title:d.find("textarea[name=sq_title]"),sq_description:d.find("textarea[name=sq_description]"),sq_keywords:d.find("input[name=sq_keywords]"),sq_noindex:d.find("input[name=sq_noindex]"),sq_nofollow:d.find("input[name=sq_nofollow]"),sq_nositemap:d.find("input[name=sq_nositemap]"),sq_canonical:d.find("input[name=sq_canonical]"),sq_og_media:d.find("input[name=sq_og_media]"),sq_og_media_preview:d.find("img.sq_og_media_preview"),og_image_close:d.find(".sq_og_image_close"),sq_og_title:d.find("textarea[name=sq_og_title]"),sq_og_description:d.find("textarea[name=sq_og_description]"),sq_og_author:d.find("input[name=sq_og_author]"),sq_og_type:d.find("select[name=sq_og_type]"),sq_og_pixel:d.find("#sq_og_pixel_id"),sq_tw_media:d.find("input[name=sq_tw_media]"),sq_tw_media_preview:d.find("img.sq_tw_media_preview"),tw_image_close:d.find(".sq_tw_image_close"),sq_tw_title:d.find("textarea[name=sq_tw_title]"),sq_tw_description:d.find("textarea[name=sq_tw_description]"),sq_tw_type:d.find("select[name=sq_tw_type]"),sq_jsonld:d.find("textarea[name=sq_jsonld]"),sq_jsonld_code_type:d.find("select.sq_jsonld_code_type"),sq_jsonld_custom_code:d.find("div.sq_jsonld_custom_code"),sq_fpixel:d.find("textarea[name=sq_fpixel]"),sq_fpixel_code_type:d.find("select.sq_fpixel_code_type"),sq_fpixel_custom_code:d.find("div.sq_fpixel_custom_code"),sq_post_id:(d.find("input[name=sq_post_id]").length>0?d.find("input[name=sq_post_id]").val():0),sq_term_id:(d.find("input[name=sq_term_id]").length>0?d.find("input[name=sq_term_id]").val():0),sq_taxonomy:(d.find("input[name=sq_taxonomy]").length>0?d.find("input[name=sq_taxonomy]").val():""),sq_post_type:(d.find("input[name=sq_post_type]").length>0?d.find("input[name=sq_post_type]").val():""),previewTab:d.find(".sq_tab_preview"),editTab:d.find(".sq_tab_edit"),validKeyword:false,__sq_save_message:(typeof __sq_save_message!=="undefined"?__sq_save_message:"Saved!"),__sq_error_message:(typeof __sq_error_message!=="undefined"?__sq_error_message:"ERROR! Could not save the data. Please try again."),__sq_save_message_preview:(typeof __sq_save_message_preview!=="undefined"?__sq_save_message_preview:"Saved! Reload to see the changes.")},b);d.initNav=function(){var e=d.parents(".menupop:last");if(e.length>0&&d.data("snippet")==="topmenu"){e.off("hover");e.find(".ab-item").on("click",function(){e.addClass("open")});c.closeButton.on("click",function(){e.removeClass("open");e.removeClass("hover")});e.find(".sq_snippet_wrap").show()}else{d.off("hover");c.closeButton.on("click",function(){d.hide()})}};d.listenDoSeo=function(){c.sq_doseo.on("change",function(){d.saveSEO()});if(!c.sq_doseo.prop("checked")){c.previewTab.hide();c.editTab.hide();c.cancelButton.hide()}else{c.previewTab.show();c.editTab.hide()}};d.tabsListen=function(){d.find("#sq_tabs").find("li").on("click",function(e){e.preventDefault();$li=a(this);d.find("#sq_tabs").find("li").each(function(){a(this).removeClass("active")});d.find(".sq_tabcontent").each(function(){a(this).hide()});d.find("#sq_tab_"+$li.find("a").text().toString().toLowerCase()).show();$li.addClass("active")})};d.saveSEO=function(){d.preventLeave(false);d.addClass("sq_minloading");var e=d.find("#sq_hash");if(e.val()!==""){if(c.sq_title.find(".emoji").length>0){c.sq_title.find(".emoji").after(c.sq_title.find(".emoji").attr("alt")).remove()}if(c.sq_description.find(".emoji").length>0){c.sq_description.find(".emoji").after(c.sq_description.find(".emoji").attr("alt")).remove()}if(c.sq_tw_title.find(".emoji").length>0){c.sq_tw_title.find(".emoji").after(c.sq_tw_title.find(".emoji").attr("alt")).remove()}if(c.sq_tw_description.find(".emoji").length>0){c.sq_tw_description.find(".emoji").after(c.sq_tw_description.find(".emoji").attr("alt")).remove()}if(c.sq_og_title.find(".emoji").length>0){c.sq_og_title.find(".emoji").after(c.sq_og_title.find(".emoji").attr("alt")).remove()}if(c.sq_og_description.find(".emoji").length>0){c.sq_og_description.find(".emoji").after(c.sq_og_description.find(".emoji").attr("alt")).remove()}a.post(sqQuery.ajaxurl,{action:"sq_saveseo",sq_title:c.sq_title.length>0?d.escapeHtml(c.sq_title.val()):"",sq_description:c.sq_description.length>0?d.escapeHtml(c.sq_description.val()):"",sq_keywords:c.sq_keywords.length>0?d.escapeHtml(c.sq_keywords.val()):"",sq_canonical:c.sq_canonical.length>0?d.escapeHtml(c.sq_canonical.val()):"",sq_noindex:d.find("input[name=sq_noindex]:checked").length>0?parseInt(d.find("input[name=sq_noindex]:checked").val()):1,sq_nofollow:d.find("input[name=sq_nofollow]:checked").length>0?parseInt(d.find("input[name=sq_nofollow]:checked").val()):1,sq_nositemap:d.find("input[name=sq_nositemap]:checked").length>0?parseInt(d.find("input[name=sq_nositemap]:checked").val()):1,sq_tw_title:c.sq_tw_title.length>0?d.escapeHtml(c.sq_tw_title.val()):"",sq_tw_description:c.sq_tw_description.length>0?d.escapeHtml(c.sq_tw_description.val()):"",sq_tw_media:c.sq_tw_media.length>0?c.sq_tw_media.val():"",sq_tw_type:c.sq_tw_type.length>0?c.sq_tw_type.find("option:selected").val():"",sq_og_title:c.sq_og_title.length>0?d.escapeHtml(c.sq_og_title.val()):"",sq_og_description:c.sq_og_description.length>0?d.escapeHtml(c.sq_og_description.val()):"",sq_og_type:c.sq_og_type.length>0?c.sq_og_type.find("option:selected").val():"",sq_og_author:c.sq_og_author.length>0?d.escapeHtml(c.sq_og_author.val()):"",sq_og_media:c.sq_og_media.length>0?c.sq_og_media.val():"",sq_jsonld_code_type:(c.sq_jsonld_code_type.length>0)?c.sq_jsonld_code_type.find("option:selected").val():"auto",sq_jsonld:(c.sq_jsonld.length>0&&c.sq_jsonld_code_type.find("option:selected").val()==="custom")?c.sq_jsonld.val():"",sq_fpixel_code_type:(c.sq_fpixel_code_type.length>0)?c.sq_fpixel_code_type.find("option:selected").val():"auto",sq_fpixel:(c.sq_fpixel.length>0&&c.sq_fpixel_code_type.find("option:selected").val()==="custom")?c.sq_fpixel.val():"",sq_url:c.sq_url.length>0?d.escapeHtml(c.sq_url.val()):"",sq_hash:e.val(),post_id:c.sq_post_id,term_id:c.sq_term_id,taxonomy:c.sq_taxonomy,post_type:c.sq_post_type,sq_doseo:d.find("input[name=sq_doseo]:checked").length>0?parseInt(d.find("input[name=sq_doseo]:checked").val()):0,sq_nonce:sqQuery.nonce},function(){}).done(function(g){d.removeClass("sq_minloading");if(typeof g.saved!=="undefined"){if(typeof g.html!=="undefined"){var f=d.find(".sq-nav-item.active");d.html(g.html);d.sq_editSnippet({called:"ajax"});d.find(f).trigger("click");d.trigger("sq_snippet_loaded");d.trigger("sq_snippet_saved");SQ_DEBUG&&console.log("sq_snippet_loaded");SQ_DEBUG&&console.log("sq_snippet_saved")}else{a.sq_showError("Couldn't load the page. Please refresh.",0)}if(typeof g.error!=="undefined"){a.sq_showError(g.error,2000)}else{a.sq_showSaved(c.__sq_save_message,2000)}}else{a.sq_showError(c.__sq_error_message,2000)}}).fail(function(){d.removeClass("sq_minloading");a.sq_showError(c.__sq_error_message,2000)})}};d.populateInputs=function(){var f=a(document).find("head title").text();if(!f){f=""}var e=d.find('meta[name="description"]').attr("content");if(!e){e=""}if(d.find(".sq_title").length>0){d.find(".sq_title").each(function(){a(this).sq_checkMax()})}if(d.find(".sq_description").length>0){d.find(".sq_description").each(function(){a(this).sq_checkMax()})}if(d.find(".sq_tab_facebook").find(".sq_deactivated").length>0){d.find(".sq_tab_facebook").find(".sq_snippet_title").text(d.find(".sq_tab_meta").find(".sq_snippet_title").text());d.find(".sq_tab_facebook").find(".sq_snippet_description").text(d.find(".sq_tab_meta").find(".sq_snippet_description").text())}if(d.find(".sq_tab_twitter").find(".sq_deactivated").length>0){d.find(".sq_tab_twitter").find(".sq_snippet_title").text(d.find(".sq_tab_meta").find(".sq_snippet_title").text());d.find(".sq_tab_twitter").find(".sq_snippet_description").text(d.find(".sq_tab_meta").find(".sq_snippet_description").text())}if(c.sq_og_media_preview&&c.sq_og_media.val()!==""){c.sq_og_media_preview.attr("src",c.sq_og_media.val());c.og_image_close.show()}c.og_image_close.on("click",function(){c.sq_og_media_preview.attr("src","");c.sq_og_media.val("");a(this).hide()});if(c.sq_tw_media_preview&&c.sq_tw_media.val()!==""){c.sq_tw_media_preview.attr("src",c.sq_tw_media.val());c.tw_image_close.show()}c.tw_image_close.on("click",function(){c.sq_tw_media_preview.attr("src","");c.sq_tw_media.val("");a(this).hide()});c.refreshButton.on("click",function(){d.sq_loadSnippet()});d.keywordsListen();c.editButton.on("click",function(){c.previewTab.hide();c.editTab.show();c.cancelButton.on("click",function(){c.previewTab.show();c.editTab.hide()});if(a.isFunction(a.fn.sq_patterns)){d.find(".sq_pattern_field").each(function(){a(this).sq_patterns().init()})}})};d.mediaListen=function(){d.find(".sq_get_og_media, .sq_get_tw_media").click(function(i){i.preventDefault();var k=a(this).parents(".sq-row:last").find(".sq_og_media_preview");var h=a(this).parents(".sq-row:last").find(".sq_og_image_close");var j=a(this).parents(".sq-row:last").find(".sq_tw_media_preview");var f=a(this).parents(".sq-row:last").find(".sq_tw_image_close");var g;if(g){g.open()}g=wp.media({title:"Select Media",multiple:false,library:{type:"image"}});g.on("close",function(){var m=g.state().get("selection");var l=null;var e=0;m.each(function(n){l=n.attributes["url"];e++});if(k.length>0&&l!==null){c.sq_og_media.val(l);k.attr("src",l);h.show()}if(j.length>0&&l!==null){c.sq_tw_media.val(l);j.attr("src",l);f.show()}});g.on("open",function(){var e=g.state().get("selection")});g.open()})};d.dropDownListen=function(){var h,f,i,e,g;c.sq_toggle.on("click",function(){e=a(this);e.css("height","auto");i=e.parents(".sq-input-group:last").find(".sq-actions");if(i.data("position")=="small"){i.css("top","35px");i.css("height","36px")}else{var j=(e.height()+20);i.css("top",j+"px")}f=i.find(".sq-action");i.show();f.on("click",function(){if(typeof h!=="undefined"){var k=h.find(".sq-value")}else{var k=a(this).find(".sq-value")}if(typeof k!=="undefined"&&k!==""){e.val(k.data("value"));e.trigger("change");e.sq_checkMax()}});e.on("keyup",function(){a(this).parents(".sq-input-group:last").find(".sq-actions").hide()});e.sq_bodyClick("click",function(){a(this).parents(".sq-input-group:last").find(".sq-actions").hide()})});c.sq_jsonld_code_type.on("change",function(){if(c.sq_jsonld_code_type.find("option:selected").val()==="custom"){c.sq_jsonld_custom_code.show()}else{c.sq_jsonld_custom_code.hide()}});c.sq_fpixel_code_type.on("change",function(){if(c.sq_fpixel_code_type.find("option:selected").val()==="custom"){c.sq_fpixel_custom_code.show()}else{c.sq_fpixel_custom_code.hide()}})};d.keywordsListen=function(){c.sq_keywords.sqtagsinput("items")};d.escapeHtml=function(f){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return f.toString().replace(/[&<>"']/g,function(g){return e[g]})};d.preventLeave=function(e){if(a("form#post").length==0){if(e){a(window).on("beforeunload",function(){return confirm("You have unsave changes in Squirrly Snippet. Are you sure you want to proceed?")})}else{a(window).off("beforeunload")}}};d.initNav();d.listenDoSeo();d.mediaListen();d.tabsListen();d.populateInputs();d.dropDownListen();d.find('input[type="text"], textarea').on("keyup paste",function(){d.preventLeave(true);a(this).sq_checkMax()});c.saveButton.on("click",function(e){e.preventDefault();SQ_DEBUG&&console.log("save");d.preventLeave(false);d.saveSEO()});if(typeof a.sq_blockseo!=="undefined"){a.sq_blockseo.on("sq_seo_refresh",function(){c.refreshButton.trigger("click")})}a(document).on("after-autosave.update-post-slug",function(g,f){d.preventLeave(false)});if(d.find(".sq_save_ajax").length>0){d.find(".sq_save_ajax").find("input").on("change",function(){a(this).sq_ajaxSnippetListen()});d.find(".sq_save_ajax").find("button").on("click",function(){a(this).sq_ajaxSnippetListen()})}return d};a.fn.sq_checkMax=function(){var l=a(this);var h=l.parents(".sq-input-group:last");var b=0,f=0,e=0,g=0,j=300;var c="";if(!l.length>0){return}if(l.is("input, textarea")){e=c=l.val()}else{e=c=l.html()}b=e.length;if(h.find(".sq_length").length){j=parseInt(h.find(".sq_length").data("maxlength"))}if(h.hasClass("sq_pattern_field")){var k=h.find(".sq_pattern_list");g=e.split(" ");if(g.length>0){for(var d=0;d<g.length;d++){if(k.find('li[data-pattern="'+g[d].replace(new RegExp('"',"g"),"")+'"]').length){e=e.replace(g[d],"");e=e.replace("  "," ");e=e.trim();if(k.find('li[data-pattern="'+g[d].replace(new RegExp('"',"g"),"")+'"]').data("value")){f+=k.find('li[data-pattern="'+g[d].replace(new RegExp('"',"g"),"")+'"]').data("value").length}c=c.replace(new RegExp(g[d],"g"),k.find('li[data-pattern="'+g[d].replace(new RegExp('"',"g"),"")+'"]').data("value"))}}b=e.length+f}}l.attr("title",c);h.find(".sq_length").text(b+"/"+j);if(b===0||b>j){l.attr("style","border: solid 1px red !important")}else{l.attr("style","border: none !important")}};a.fn.sq_bodyClick=function(c,b){return this.each(function(){var f=a(this),d=this;a(document).on(c,function g(h){if(h.target!==d&&!a.contains(d,h.target)){b.apply(d,[h]);a(document).off(c,g)}});f.on("keydown blur",function e(h){if(h.which===9){b.apply(d,[h]);f.off("keydown",e)}})})};a.fn.toggleSwitch=function(c){var b=a(this);if((b.prop("checked")&&c==false)||(!b.prop("checked")&&c==true)){b.trigger("click")}};a.fn.sq_getSnippet=function(c,e,b,d){var f=this;f.addClass("sq_minloading");a.post(sqQuery.ajaxurl,{action:"sq_getsnippet",post_id:c,term_id:e,taxonomy:b,post_type:d,sq_nonce:sqQuery.nonce}).done(function(g){if(typeof g!=="undefined"){if(typeof g.html!=="undefined"){a("div.tooltip").hide();f.html(g.html);f.sq_editSnippet();f.trigger("sq_snippet_loaded");SQ_DEBUG&&console.log("sq_snippet_loaded")}else{a("#sq_blocksnippet").trigger("error.refresh")}if(typeof g.error!=="undefined"){a.sq_showError(g.error,10000)}}else{a("#sq_blocksnippet").trigger("error.refresh");SQ_DEBUG&&console.log("no data received")}f.removeClass("sq_minloading")}).fail(function(){SQ_DEBUG&&console.log("no data received");a("#sq_blocksnippet").trigger("error.refresh");f.removeClass("sq_minloading")},"json")};a.fn.sq_previewSnippet=function(c,b){var d=this;if(typeof c==="undefined"){c=""}if(typeof b==="undefined"){b=""}d.find(".sq_snippet_ul").addClass("sq_minloading");d.find(".sq_snippet_title").html("");d.find(".sq_snippet_url").html("");d.find(".sq_snippet_description").html("");d.find(".sq_snippet_keywords").hide();d.find(".sq_snippet").show();d.find(".sq_snippet_update").hide();d.find(".sq_snippet_customize").hide();d.find(".ogimage_preview").hide();setTimeout(function(){a.post(sqQuery.ajaxurl,{action:"sq_previewsnippet",url:c,sq_nonce:sqQuery.nonce}).done(function(e){d.find(".sq_snippet_ul").removeClass("sq_minloading");d.find(".sq_snippet_update").show();d.find(".sq_snippet_customize").show();d.find(".sq_snippet_keywords").show();d.find(".ogimage_preview").show();if(e){d.find(".sq_snippet_title").html(e.title);if(b!==""){d.find(".sq_snippet_url").html('<a href="'+c+'" target="_blank">'+b+"</a>")}else{d.find(".sq_snippet_url").html(e.url)}d.find(".sq_snippet_description").html(e.description)}}).fail(function(){d.find(".sq_snippet_ul").removeClass("sq_minloading");d.find(".sq_snippet_update").show()},"json")},500)};a.fn.sq_ajaxSnippetListen=function(){var d=this;var g=a("#"+d.data("input"));var b=d.data("confirm");var f=d.data("action");var e=d.data("name");var c=0;if(!g.length){g=d}if(typeof b!=="undefined"){if(!confirm(b)){return}}if(g.is("checkbox")&&g.is(":checked")){c=g.val()}else{if(g.is("select")){c=g.find("option:selected").val()}else{if(g.is("input")){c=g.val()}}}d.addClass("sq_minloading");if(f!==""&&c!==""){a.post(sqQuery.ajaxurl,{action:f,input:e,value:c,sq_nonce:sqQuery.nonce}).done(function(h){if(typeof h.data!=="undefined"){if(h.data===""){a("#wpbody-content").prepend("Saved")}else{a("#wpbody-content").prepend(h.data)}setTimeout(function(){d.removeClass("sq_minloading");var i=d.closest("div.sq_save_ajax").parent("div");if(i.length>0){i.find(".sq_deactivated_label").remove();i.find(".sq_deactivated").removeClass("sq_deactivated")}else{location.reload()}},1000)}else{if(typeof h.error!=="undefined"){a("body").prepend(h.error);d.removeClass("sq_minloading")}}}).fail(function(){d.removeClass("sq_minloading");location.reload()},"json")}};if(!a.sq_isGutenberg){a.sq_isGutenberg=function(b){return(typeof window.wp!=="undefined"&&typeof wp.data!=="undefined"&&typeof wp.data.select("core/editor")!=="undefined"&&a.isFunction(wp.data.select("core/editor").getEditedPostAttribute))}}a(document).ready(function(){var d=a("#wp-admin-bar-sq_bar_menu");var c=false;var b="metas";if(d.length>0){if(d.find('#sq_blocksnippet[data-snippet="topmenu"]').length){c=d.find("#sq_blocksnippet");c.sq_loadSnippet()}else{if(a('#sq_blocksnippet[data-snippet!="topmenu"]').length){c=a("#sq_blocksnippet");d.find("#wp-admin-bar-sq_bar_submenu").remove();d.find(".ab-item").on("click",function(){if(a(".edit-post-layout__content").length>0){a(".edit-post-layout__content").scrollTop(a(".edit-post-layout__content").scrollTop()+c.offset().top-100)}else{a("html,body").scrollTop(c.offset().top-50)}});c.addClass("sq_blocksnippet").addClass("sq-shadow-sm").addClass("sq-border-bottom");c.find(".inside").show().sq_loadSnippet()}}if(c){c.on("sq_snippet_loaded",function(){$snippet=a(this);$snippet.find(".sq-nav-item.sq-nav-link").on("click",function(){b=a(this).data("category")});$snippet.find(".sq-nav-item").removeClass("active");$snippet.find(".sq-tab-pane").removeClass("active");var e=$snippet.find(".sq_snippet_menu").find("#sq-nav-item_"+b);e.addClass("active");$snippet.find(e.attr("href")).addClass("active")});c.on("error.refresh",function(){a.sq_showError("Couldn't load the page. <span class='sq_snippet_refresh' style='color: #0F75BC; cursor:pointer;'>Please refresh</span>.",0);a(".sq_snippet_refresh").on("click",function(){c.sq_loadSnippet()})})}}})})(jQuery);